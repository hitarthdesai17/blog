<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Our Cutiee World üíó</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    * {
      box-sizing: border-box;
      font-family: "Comic Sans MS", "Poppins", Arial, sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      background: linear-gradient(135deg, #ffb6c1, #ffd6e8, #cce7ff);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      padding-bottom: 70px; /* space for sticky footer */
      overflow-y: auto;
    }

    /* ---------- LOADING OVERLAY ---------- */
    #loading {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,230,240,0.95));
      z-index: 50000;
      flex-direction: column;
      gap: 14px;
    }

    .hearts {
      position: relative;
      width: 220px;
      height: 70px;
      overflow: visible;
    }

    .heart {
      position: absolute;
      font-size: 20px;
      opacity: 0.95;
      animation: floatUp 1.6s linear infinite;
      transform-origin: center;
    }

    .heart:nth-child(1) { left: 10%; animation-delay: 0s; }
    .heart:nth-child(2) { left: 26%; animation-delay: 0.15s; font-size:24px; }
    .heart:nth-child(3) { left: 42%; animation-delay: 0.3s; }
    .heart:nth-child(4) { left: 58%; animation-delay: 0.45s; }
    .heart:nth-child(5) { left: 74%; animation-delay: 0.6s; }

    @keyframes floatUp {
      0% { transform: translateY(0) scale(0.9); opacity: 1; }
      50% { transform: translateY(-28px) scale(1.05); opacity: 0.95; }
      100% { transform: translateY(-62px) scale(1.0); opacity: 0; }
    }

    #loading h2 {
      color: #d64375;
      margin: 0;
      font-size: 1.25rem;
      letter-spacing: 0.02em;
      text-align: center;
    }

    /* üî≥ BACKGROUND COLLAGE (LOCK SCREEN) */
    .bg-collage-grid {
      position: fixed;
      inset: 0;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(2, 1fr);
      z-index: 0;
      overflow: hidden;
    }

    .bg-collage-grid .tile {
      position: relative;
      overflow: hidden;
      transform: translateX(100%);
      animation: slideIn 0.9s forwards ease-out;
      filter: brightness(0.45);
    }

    .bg-collage-grid .tile:nth-child(1) { animation-delay: 0.0s; }
    .bg-collage-grid .tile:nth-child(2) { animation-delay: 0.2s; }
    .bg-collage-grid .tile:nth-child(3) { animation-delay: 0.4s; }
    .bg-collage-grid .tile:nth-child(4) { animation-delay: 0.6s; }
    .bg-collage-grid .tile:nth-child(5) { animation-delay: 0.8s; }
    .bg-collage-grid .tile:nth-child(6) { animation-delay: 1.0s; }

    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to   { transform: translateX(0);    opacity: 1; }
    }

    .bg-collage-grid img,
    .bg-collage-grid video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    /* fade out collage after unlock */
    body.unlocked .bg-collage-grid {
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.8s ease;
    }

    .container {
      position: relative;
      z-index: 1;
      background: rgba(255,255,255,0.95);
      width: 100%;
      max-width: 900px;
      border-radius: 25px;
      padding: 22px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.2);
      animation: fadeIn 1.2s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    h1 {
      text-align: center;
      color: #ff4f8b;
      margin-bottom: 6px;
    }

    .sub {
      text-align: center;
      color: #666;
      font-size: 0.95rem;
      margin-bottom: 8px;
    }

    /* üîê LOCK SCREEN */
    #lock {
      text-align: center;
      padding: 20px;
    }

    #lock p {
      color: #444;
      margin-bottom: 10px;
    }

    #password {
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid #ccc;
      outline: none;
      width: 80%;
      max-width: 240px;
      text-align: center;
      font-size: 0.95rem;
    }

    #password:focus {
      border-color: #ff6fa5;
    }

    .btn {
      margin-top: 10px;
      padding: 9px 22px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #ff6fa5, #ff99c8);
      color: white;
      cursor: pointer;
      font-size: 0.95rem;
    }

    .btn:hover {
      opacity: 0.9;
    }

    .error {
      color: crimson;
      font-size: 0.85rem;
      margin-top: 6px;
      min-height: 18px;
    }

    /* üíó BLOG */
    #blog {
      display: none;
    }

    /* (many of your original styles retained without change) */
    /* ... all other styles from your original file keep the same look ... */

    /* For brevity in this CSS block I have kept your original page styles intact and only appended changes below. */
    /* In a real deployment you'd keep the full CSS; here the important additions/fixes are included. */

    /* ---------- ENVELOPE OPEN ANIMATION ---------- */
    /* add transitions for the pseudo flap via a class toggle on the parent envelope */
    .envelope {
      width: 80px;
      height: 50px;
      background: #ff99c8;
      position: relative;
      border-radius: 4px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1;
      transition: transform 0.28s ease;
    }

    .envelope::before {
      content: '';
      position: absolute;
      top: 0;
      width: 0;
      height: 0;
      border-left: 40px solid transparent;
      border-right: 40px solid transparent;
      border-top: 30px solid #ffb3d6;
      transform-origin: top;
      transition: transform 0.45s cubic-bezier(.2,.9,.3,1), opacity 0.35s;
      z-index: 3;
      backface-visibility: hidden;
    }

    .envelope.open {
      transform: translateY(-6px) scale(1.02);
    }

    .envelope.open::before {
      transform: rotateX(180deg) translateY(-6px);
      opacity: 0.98;
      z-index: 0;
    }

    .envelope .seal {
      position: absolute;
      top: 18px;
      z-index: 4;
      font-size: 14px;
      color: #d64375;
      text-shadow: 0 1px 2px rgba(0,0,0,0.2);
      transition: transform 0.45s cubic-bezier(.2,.9,.3,1);
    }

    .envelope.open .seal {
      transform: translateY(-10px) scale(.95);
      opacity: 0.95;
    }

    /* ---------- CONFETTI ---------- */
    .confetti-piece {
      position: fixed;
      width: 8px;
      height: 12px;
      opacity: 0.95;
      z-index: 35000;
      pointer-events: none;
      transform-origin: center;
      will-change: transform, opacity;
      border-radius: 2px;
    }

    /* ---------- GAME BUTTON & MODAL IMPROVEMENTS ---------- */
    #gameButton {
      display: none;
      position: fixed;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #ff6fa5, #ff99c8);
      color: white;
      font-size: 1rem;
      font-weight: bold;
      border: none;
      padding: 12px 26px;
      border-radius: 999px;
      box-shadow: 0 6px 20px rgba(255, 111, 165, 0.4);
      cursor: pointer;
      z-index: 10000;
      opacity: 0;
      transition: opacity 1s ease, transform 0.4s ease;
    }

    #gameButton.show {
      display: block;
      opacity: 1;
      transform: translateX(-50%) translateY(-10px);
      animation: bounceIn 1.2s infinite;
    }

    @keyframes bounceIn {
      0% { transform: translateX(-50%) translateY(-10px) scale(1); }
      40% { transform: translateX(-50%) translateY(-14px) scale(1.03); }
      80% { transform: translateX(-50%) translateY(-10px) scale(0.995); }
      100% { transform: translateX(-50%) translateY(-10px) scale(1); }
    }

    .game-modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.45);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 20000;
    }
    .game-modal[aria-hidden="false"] {
      display: flex;
    }

    .game-box {
      background: linear-gradient(135deg, #fff0f6, #ffe4f7);
      border-radius: 22px;
      border: 2px solid #ffb3d6;
      padding: 26px;
      width: 90%;
      max-width: 520px;
      box-shadow: 0 14px 40px rgba(0,0,0,0.3);
      text-align: center;
      animation: popIn 0.6s ease;
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-height: 78vh;       /* allow scrolling when many boxes open */
      overflow: auto;         /* important so close button stays visible via sticky */
    }

    .game-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
      margin-top: 6px;
    }

    .box {
      background: #fff;
      border: 2px dashed #ff8fb8;
      border-radius: 12px;
      padding: 14px 0;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
      color: #ff4f8b;
      box-shadow: 0 4px 12px rgba(255,111,165,0.15);
      user-select: none;
    }

    .box:hover {
      background: #ffb3d6;
      color: white;
      transform: translateY(-4px);
    }

    .box.opened {
      background: #ff99c8;
      color: white;
      border-style: solid;
      transform: scale(1.05);
      pointer-events: none;
    }

    .task-bubble {
      margin-top: 10px;
      background: #fff7fb;
      border-radius: 14px;
      padding: 10px;
      font-size: 0.9rem;
      color: #444;
      border: 1px solid #ffb3d6;
      box-shadow: 0 4px 14px rgba(0,0,0,0.08);
      animation: fadeInTask 0.6s ease;
    }

    @keyframes fadeInTask {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* make close button sticky so it remains visible even when grid grows */
    .close-game {
      margin-top: 8px;
      background: linear-gradient(135deg, #ff6fa5, #ff99c8);
      border: none;
      color: white;
      border-radius: 999px;
      padding: 8px 20px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 6px 20px rgba(255,79,139,0.3);
      position: sticky;
      bottom: 12px;      /* keeps the button visible at bottom of modal viewport */
      align-self: center;
      z-index: 10;
    }

    /* responsive tweaks */
    @media (max-width: 520px) {
      .game-grid { grid-template-columns: repeat(2,1fr); }
      .envelope { width: 66px; height: 44px; }
      .envelope::before { border-left:33px solid transparent; border-right:33px solid transparent; border-top:24px solid #ffb3d6; }
    }

  </style>
</head>

<body>

  <!-- Loading overlay -->
  <div id="loading" aria-hidden="false">
    <div class="hearts" aria-hidden="true">
      <div class="heart">üíó</div>
      <div class="heart">üíñ</div>
      <div class="heart">‚ù§</div>
      <div class="heart">üíï</div>
      <div class="heart">üíû</div>
    </div>
    <h2>I love you sweetheart!</h2>
  </div>

  <div class="bg-collage-grid">
    <div class="tile"><img src="images/bg1.jpg" alt=""></div>
    <div class="tile"><img src="images/bg2.jpg" alt=""></div>
    <div class="tile"><img src="images/bg3.jpg" alt=""></div>
    <div class="tile"><img src="images/bg4.jpg" alt=""></div>
    <div class="tile"><img src="images/bg5.jpg" alt=""></div>
    <div class="tile"><img src="images/bg6.jpg" alt=""></div>
  </div>

  <div class="container">
    <h1>Our Love Scrapbook üíó</h1>
    <div class="sub">A secret cute little world only for us ü•∫‚ú®</div>
    <div class="sub"><b>I am just a man written by you..</b></div>

    <div id="lock">
      <p>Enter our secret password to unlock our memories üíï</p>

      <form id="login-form">
        <input id="password" type="password" placeholder="Passwordd neededd mam!" required>
        <br>
        <button class="btn" type="submit">Unlock üíó</button>
      </form>

      <div id="error" class="error"></div>
    </div>

    <div id="blog">

      <section class="open-when-section">
        <h2 class="ow-heading">Open When You Need Me... üíå</h2>
        
        <div class="envelope-grid">
          
          <div class="envelope-container" data-type="sad">
            <div class="envelope"><div class="seal">‚ù§</div></div>
            <div class="envelope-label">You are Sad</div>
          </div>

          <div class="envelope-container" data-type="miss">
            <div class="envelope"><div class="seal">‚ù§</div></div>
            <div class="envelope-label">You Miss Me</div>
          </div>

          <div class="envelope-container" data-type="happy">
            <div class="envelope"><div class="seal">‚ù§</div></div>
            <div class="envelope-label">You Need a Laugh</div>
          </div>

          <div class="envelope-container" data-type="love">
            <div class="envelope"><div class="seal">‚ù§</div></div>
            <div class="envelope-label">Why I Love You</div>
          </div>

        </div>
      </section>

      <div class="reel-section">
        <div class="reel-title">Here are your favourite guys üòèüé•</div>
        <div class="reel-sub">
          Since you love them so much, I kept them ready in reel format just for you.
          After this, back to your real favourite guy (me). üíó
        </div>

        <div class="reel-grid">
          <div class="reel">
            <video class="autoplay-reel" muted loop playsinline preload="auto">
              <source src="videos/reel1.mp4" type="video/mp4">
            </video>
          </div>
          <div class="reel">
            <video class="autoplay-reel" muted loop playsinline preload="auto">
              <source src="videos/reel2.mp4" type="video/mp4">
            </video>
          </div>
        </div>
      </div>

      <div class="journal-wrapper">
        <div class="journal-inner">
          <div class="journal-top-line">
            <span><b><i>H&M</i></b></span>
            <span>THE BHOCHKUU JOURNAL</span>
            <span>DATE: 23/12/24</span>
          </div>
          <div class="journal-name">THE BHOCHKUU JOURNAL</div>
          <div class="journal-title-bar">Title: The Day My Life Changed Because of You</div>
          <div class="journal-byline">By Ussü´∂</div>
          <div class="journal-lead">
            Sometimes life changes quietly. No fireworks, no big announcement ‚Äî
            just a message, a call, a smile. That‚Äôs how it started with you, and
            that‚Äôs how our ordinary days turned into mour favourite story. üíó
          </div>

          <div class="journal-grid">
            <div class="journal-column">
              <div class="journal-subtitle">Little Moments That Started It</div>
              <div class="journal-list">
                <p class="journal-heart-bullet"><b>First Chat:</b> That first text which made me drive crazy for you<p>
                <p class="journal-heart-bullet"><b>Late-Night Talks:</b> Where every word and text meant whole world</p>
                <p class="journal-heart-bullet"><b>Inside Jokes:</b> The kind only we understand.</p>
                <p class="journal-heart-bullet"><b>Random Good Mornings:</b>The texts i loved!</p>
              </div>
            </div>
            <div class="journal-column">
              <div class="journal-subtitle">Why You‚Äôre My Favourite Person?</div>
              <div class="journal-list">
                <p class="journal-heart-bullet">With you storms felt lovely.</p>
                <p class="journal-heart-bullet">On bad days, your words feel like home.</p>
                <p class="journal-heart-bullet">Your thought's always enough to make me smile.</p>
                <p class="journal-heart-bullet">When i know i will miss you more in a room full of people..</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="collage-section">
        <img class="collage-full" src="images/collage.jpg" alt="Our Collage" loading="lazy">
        <div class="collage-caption-text">Our Collage ‚Äî a whole page of us üíó</div>
      </div>

      <div class="love-counter">
        <h2 class="counter-title">Since The Day Our Hands First Met ü§ùüíó</h2>
        <p class="counter-date">6 July</p>
        <div class="counter-grid" id="loveCounter">
          <div class="counter-box"><span class="counter-number" id="c-days">0</span><span class="counter-label">Days</span></div>
          <div class="counter-box"><span class="counter-number" id="c-hours">0</span><span class="counter-label">Hours</span></div>
          <div class="counter-box"><span class="counter-number" id="c-minutes">0</span><span class="counter-label">Minutes</span></div>
          <div class="counter-box"><span class="counter-number" id="c-seconds">0</span><span class="counter-label">Seconds</span></div>
        </div>
      </div>

      <div class="reason-section">
        <h3 class="reason-title">‚ú® Why I Love You? ‚ú®</h3>
        <div class="reason-card">
          <p id="reason-display">Click the button below! üëá</p>
        </div>
        <button class="reason-btn" onclick="showReason()">
          <span class="btn-text">Tell me why ü•∫</span>
          <span class="btn-heart">üíó</span>
        </button>
      </div>

      <div class="timeline-section" id="our-story">
        <div class="timeline-inner">
          <h2 class="timeline-heading">Our Story, Step by Step üíó</h2>
          <p class="timeline-subtitle">Just little dots on this line‚Ä¶ but each one changed my heart. ü•∫</p>
          <div class="timeline-line"></div>
          
          <div class="timeline-item">
            <div class="timeline-marker">‚ô•</div>
            <div class="timeline-card">
              <div class="timeline-label">First Chat</div>
              <div class="timeline-date">14 June 2024</div>
              <div class="timeline-text">That shy first ‚Äúhi‚Äù that didn‚Äôt know it was starting forever.</div>
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-marker">‚ô•</div>
            <div class="timeline-card">
              <div class="timeline-label">First Call</div>
              <div class="timeline-date">4 July 2024</div>
              <div class="timeline-text">Your voice that night felt more like home than my own room.</div>
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-marker">‚ô•</div>
            <div class="timeline-card">
              <div class="timeline-label">First Fight</div>
              <div class="timeline-date">Didnt remembered hehe</div>
              <div class="timeline-text">We broke a little‚Ä¶ but we chose each other again, even louder.</div>
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-marker">‚ô•</div>
            <div class="timeline-card">
              <div class="timeline-label">First Kiss</div>
              <div class="timeline-date">22 Sep 2024</div>
              <div class="timeline-text">My whole world paused forgot how to be alone.</div>
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-marker">‚ô•</div>
            <div class="timeline-card">
              <div class="timeline-label">Today</div>
              <div class="timeline-date">Right now</div>
              <div class="timeline-text">Still choosing you. Still learning you. Still falling again & again.</div>
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-marker">‚ô•</div>
            <div class="timeline-card">
              <div class="timeline-label">Tomorrow</div>
              <div class="timeline-date">Every day after this</div>
              <div class="timeline-text">I don‚Äôt know the future, but I know your name is already in it. ‚ú®</div>
            </div>
          </div>
        </div>
      </div>

      <div class="memory">
        <div class="memory-content">
          <h2>üíóüíû The Day We First Spoke üíûüíó</h2>
          <p>That moment when everything felt different. I didn‚Äôt know yet, but my heart already chose you that day. ü•∫üíó This was the beginning of *us*. It was just amazing to see you in that black dress! You took my breath away and i whispered underneath myy breath! Darlingg you look perfectt tonighttü•πüßø</p>
        </div>
        <img src="images/first.jpg" alt="First memory">
      </div>

      <div class="memory">
        <div class="memory-content">
          <h2>üåô Our Late Night Talks</h2>
          <p>When the whole world slept but we stayed awake, sharing dreams, jokes, fears‚Ä¶ and love. üíóEvery saturdays were just blessingg to me it was the day i would cry out my heart loud and could share some happy tears too...</p>
        </div>
        <img src="images/night.jpg" alt="Late night chat">
      </div>

      <div class="memory">
        <div class="memory-content">
          <h2>üíñ Every Little Moment</h2>
          <p>From silly fights to tight hugs, from missed calls to long smiles ‚Äî everything with you is special. üíïEvery little moment every time you care every time it brought me a smilee on my face. Those little little things you do to make us better. I lovee youuu myy gurll‚ù§Ô∏è‚Äçü©πüßø</p>
        </div>
        <img src="images/us.jpg" alt="Us together">
      </div>

      <div class="memory">
        <div class="memory-content">
          <h2>Our Fav Momentü•π</h2>
          <p>It was 8th of januaryy and we just had our first lip kiss sitting up while i was sleeping in your lap. In my eyes i could see two of moons and one close to me was more beautifull.. i saw your face and something in me couldnt resist so i just kissed your lipss! And then we went down on terrace to have walk and while we were walking we were talking about metro station things that arya did and we go to the other side and i lifted you up! You were saying that niche utar hitu niche utar! Me kidhu kiss kr to j and u kissed me on lips and trust me i didnt expect lip kiss hehe but it was one of the bestest day!</p>
        </div>
        <img src="images/us.jpg" alt="Us together">
      </div>

      <button id="gameButton">Play a Game üíå</button>

      <div id="gameModal" class="game-modal" aria-hidden="true">
        <div class="game-box" role="dialog" aria-modal="true" aria-labelledby="gameTitle">
          <h3 id="gameTitle" style="color:#ff4f8b;">Choose a Box üé≤</h3>
          <div class="game-grid" id="gameGrid" aria-live="polite"></div>
          <p class="game-ps">Whatever you open‚Ä¶ the task is compulsory for you ;)üíó
            And you owe me 5 videos and i will tell how exactly i want you to record hehe
          </p>
          <button class="close-game" onclick="closeGame()">Close</button>
        </div>
      </div>

    </div> 
  </div> 

  <div id="owModal" class="ow-modal" aria-hidden="true">
    <div class="ow-modal-backdrop" onclick="closeLetter()"></div>
    <div class="ow-modal-content">
      <h3 id="owTitle" style="color: #d64375; margin-bottom: 10px;">Letter Title</h3>
      <div id="owContent" class="ow-unlocked-text">
        </div>
      <button class="ow-close-btn" onclick="closeLetter()">Close Letter</button>
    </div>
  </div>

  <div class="love-message-overlay" id="loveMessageOverlay" aria-hidden="true">
    <div class="love-string"></div>
    <div class="love-message-box">
      <p>Heyy <strong>my lovee</strong> üíó<br>Just wanted to remind you that<br>no matter how hard life gets,<br>I‚Äôm always with you, okay? ü•∫‚ú®</p>
      <button class="love-message-button" id="loveMessageClose">Okay my love üíó</button>
    </div>
  </div>

  <div class="love-note">
    <span>No matter how far you are‚Ä¶ I‚Äôll be right here with you. üíóüåô</span>
  </div>

  <script>
    /***** Simple WebAudio tones (no external files) *****/
    function playTone(freq, duration=0.12, type='sine', gain=0.06) {
      try {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type = type;
        o.frequency.value = freq;
        g.gain.value = gain;
        o.connect(g); g.connect(ctx.destination);
        o.start();
        setTimeout(()=> { o.stop(); ctx.close(); }, duration*1000);
      } catch (e) {
        // ignore if blocked
      }
    }
    function playPop(){ playTone(880, 0.08, 'triangle', 0.06); }
    function playChime(){ playTone(660, 0.18, 'sine', 0.07); }
    function playConfirm(){ playTone(980, 0.14, 'sine', 0.07); }

    /***** Loading overlay hide after short moment *****/
    window.addEventListener('load', () => {
      // keep loading visible for a short time so hearts animate
      setTimeout(() => {
        const loading = document.getElementById('loading');
        if (loading) loading.style.display = 'none';
      }, 1100);
    });

    /***** Core page logic (password unlock etc.) *****/
    const CORRECT_PASSWORD = "Hitarth777";
    const form = document.getElementById("login-form");
    const passInput = document.getElementById("password");
    const error = document.getElementById("error");
    const lock = document.getElementById("lock");
    const blog = document.getElementById("blog");

    const loveOverlay = document.getElementById("loveMessageOverlay");
    const loveCloseBtn = document.getElementById("loveMessageClose");
    let lovePopupScheduled = false;

    function showLovePopup() {
      if (!loveOverlay) return;
      loveOverlay.classList.add("show");
      loveOverlay.setAttribute("aria-hidden", "false");
    }
    function hideLovePopup() {
      if (!loveOverlay) return;
      loveOverlay.classList.remove("show");
      loveOverlay.setAttribute("aria-hidden", "true");
    }
    function scheduleLovePopup() {
      if (lovePopupScheduled) return;
      lovePopupScheduled = true;
      setTimeout(() => {
        if (document.body.classList.contains("unlocked")) {
          showLovePopup();
          playPop();
        }
      }, 25000);
    }
    if (loveCloseBtn) loveCloseBtn.addEventListener('click', hideLovePopup);
    if (loveOverlay) loveOverlay.addEventListener('click', (e) => { if (e.target === loveOverlay) hideLovePopup(); });

    form.addEventListener('submit', function (e) {
      e.preventDefault();
      const entered = passInput.value.trim();
      if (entered.toLowerCase() === CORRECT_PASSWORD.toLowerCase()) {
        lock.style.display = "none";
        blog.style.display = "block";
        document.body.classList.add("unlocked");
        scheduleLovePopup();

        const reels = document.querySelectorAll(".autoplay-reel");
        reels.forEach((video) => {
          video.play().catch(() => { /* autoplay blocked */ });
          video.addEventListener("click", () => {
            if (video.paused) video.play(); else video.pause();
          });
        });

        playConfirm();
      } else {
        error.textContent = "Yaad rakho barabar üò≠";
        passInput.value = "";
        playTone(240, 0.12, 'sawtooth', 0.06);
      }
    });

    // hearts on click
    document.addEventListener("click", function (e) {
      const heart = document.createElement("div");
      heart.className = "tap-heart";
      heart.textContent = "üíó";
      // offset so heart centers at click
      heart.style.left = (e.clientX - 10) + "px";
      heart.style.top = (e.clientY - 10) + "px";
      document.body.appendChild(heart);
      setTimeout(()=> heart.remove(), 1200);
    });

    // floating "I love you <3" every 25s
    setInterval(() => {
      if (!document.body.classList.contains("unlocked")) return;
      const msg = document.createElement("div");
      msg.className = "love-popup";
      msg.textContent = "I love you <3";
      const padding = 60;
      const x = Math.random() * (window.innerWidth - padding * 2) + padding;
      const y = Math.random() * (window.innerHeight - padding * 2) + padding;
      msg.style.left = x + "px";
      msg.style.top = y + "px";
      document.body.appendChild(msg);
      setTimeout(()=> msg.remove(), 3500);
    }, 25000);

    /***** Timeline appear on scroll *****/
    const timelineItems = document.querySelectorAll(".timeline-item");
    if (timelineItems.length) {
      const observer = new IntersectionObserver((entries, obs) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");
            obs.unobserve(entry.target);
          }
        });
      }, { threshold: 0.3 });

      timelineItems.forEach((item, index) => {
        if (index % 2 === 1) item.classList.add("from-right");
        observer.observe(item);
      });
    }

    // LOVE COUNTER
    function startLoveCounter() {
      const startDate = new Date("2024-07-06T22:00:00");
      function updateCounter() {
        const now = new Date();
        let diff = now - startDate;
        if (diff < 0) diff = 0;
        const totalSeconds = Math.floor(diff / 1000);
        const days = Math.floor(totalSeconds / (3600 * 24));
        const hours = Math.floor((totalSeconds % (3600 * 24)) / 3600);
        const minutes = Math.floor((totalSeconds % 3600) / 60);
        const seconds = totalSeconds % 60;
        const d = document.getElementById("c-days");
        const h = document.getElementById("c-hours");
        const m = document.getElementById("c-minutes");
        const s = document.getElementById("c-seconds");
        if (!d || !h || !m || !s) return;
        d.textContent = days; h.textContent = hours; m.textContent = minutes; s.textContent = seconds;
      }
      updateCounter();
      setInterval(updateCounter, 1000);
    }
    document.addEventListener("DOMContentLoaded", () => { startLoveCounter(); });

    // REASONS (kept content same)
    const reasons = [
      "Because you make even boring days feel special.",
      "Because of the way your eyes light up when you smile.",
      "Because you are the only one who understands my weird jokes.",
      "Because your voice is my favorite sound.",
      "Because you support my dreams.",
      "Because you look cute even when you are angry.",
      "Because being with you feels like home.",
      "Because you have the kindest heart.",
      "Because you make me want to be a better man.",
      "Because I just can't imagine a tomorrow without you.",
      "Because you heal me in untold ways.",
      "Because you always made me feel loved.",
      "Because you are pretty.",
      "Because you are so kind.",
      "Becuase you never give up things easily ",
      "Because of how your eyes speaks more than words",
      "Because of the way you love me.",
      "Because of the hair you have",
      "Because of your cutiee nakhraa",
      "Because of your prettiest brown honey eyes.",
      "Because of the way you speak.",
      "Because of the way your behaviour pushes me",
      "Because the way you express!",
      "Because of how you keep every of relation strong",
      "Because you love sm hehe",
      "Because you are you!",
      "Because of how you care",
      "Because of how you still pray!",
      "Because you are sexyy <3",
      "Because you stayed instead of leaving!",
      "Because i can write a novel on you",
      "Because of how you smell",
      "Because of how soft your skin is!",
      "Because the way everything seems coourful with you",
      "Because how you do crazy things",
      "Because of how you talk about me!",
      "Because you care about the boy who disappeared for everyone",
      "Because you were never bored of me",
      "Because you wanted solution and not to be the winner of argument",
      "Because you knew the importance of love",
      "Because you never degraded me!",
      "Because you have the prettiest soul",
      "Because you are the lovliest, babe!",
      "Because you are my brother! hehe<3",
      "Because you cared about efforts",
      "Because wanted me and not better",
      "Because you are greatest of all time!",
      "Because you always cared about others while you were not okay!But you dont deserve that okay?",
      "Because i would live happily with you!",
      "Because you would be the bestest",
      "Because you are my bestfriend",
      "Because you are keeper hehe",
      "Because you have a pretty nose",
      "Because i would sit with you for hours silently then having a 2 hour gaming session",
      "Because i would watch you sitting for hours then roaming in concerts and parties..",
      "Because your calls make me happiest alive",
      "Because the way you kiss",
      "Because the way your hug feels like heaven",
      "Because when we hold hands i hold my world!",
      "Because i feel safe wid you",
      "Because of how cutiee youu aree",
      "Because of how childishh you can be",
      "Because of how you respect me",
      "Because of how you believe in me!",
      "Because you are more than talha anjum's lyrics to me ",
      "Because you are calm to my encore!",
      "Because without you i am getting seedhe maut..",
      "Because you are words to my letters",
      "Because you are sun to my moon",
      "Because you are missing piece to my puzzle",
      "Because you complete me",
      "Because you left me no regrets",
      "Because i can be angry but not without you..",
      "Because you would teach me!",
      "Because how warm your touch feels",
      "Because of how all my fears fades when i am with you",
      "Because you love doing things i love",
      "Because for me you would hurt yourself to make me happy",
      "Because you treat me like i matter!",
      "Because i want to sleep in your arms",
      "Because i found eternal peace in your presence",
      "Because i hate when i am wihtout you",
      "Because i always wonder what my manu is doing rn?",
      "Because Manasvi is my fav name!",
      "Because i want to play luka chupi iykyk",
      "Because i was worst until you made me best",
      "Because you saw me not what i was!",
      "Because i hurt you and you still cared if i was hurt or not",
      "Because with you my words flow like river",
      "Because i stopped hating myself",
      "Because i satarted learning how to live",
      "Because you  taught me take care of my myself",
      "Because i want to be part of your every moment",
      "Because i never happen to be this jealous for someone",
      "Because i never intended to change myself to good",
      "Because you are my chicago",
      "Because you aree myyy!!!",
      "Because i saw my world in yourr eyes",
      "Because i happen to be gossiping with moon about your beauty",
      "Because i started to feel things again",
      "Because i am so grateful to have you",
      "Because i would relive my life 9999 times and everytime i would want to fall in love with you<3",
    ];

    function showReason() {
      const display = document.getElementById("reason-display");
      display.style.opacity = 0;
      setTimeout(() => {
        const random = reasons[Math.floor(Math.random() * reasons.length)];
        display.textContent = `"${random}"`;
        display.style.opacity = 1;
        playChime();
      }, 300);
    }

    /***** LETTERS & CONFETTI & ENVELOPE ANIMATION *****/
    const LETTER_CONTENT = {
      sad: "When you are sad ‚Äî Remember the time we stayed up till 4am talking about us teasing out each other my silliest yet lamyy jokes huh?.",
      miss: "When you miss me ‚Äî If you do miss me then you better do everything happily okay? Cause my memories of mine should bring smile forever! ‚ô•",
      happy: "Silly memory:Remember we were at hetvi's and like tu mara aagad aam ayine javani hti tease krva jem krto hu but instead you lost your balance and tu mara pr padvani hati pchi banne hsta?.",
      love: "Why I love you? Because it's you!."
    };

    function burstConfetti(x, y, count=24) {
      const colors = ['#ff4f8b','#ff99c8','#ffd1e6','#ffe47a','#cce7ff','#fff0f6'];
      for (let i=0;i<count;i++){
        const el = document.createElement('div');
        el.className = 'confetti-piece';
        const w = Math.random()*10 + 6;
        const h = Math.max(6, Math.random()*14 + 6);
        el.style.width = w + 'px';
        el.style.height = h + 'px';
        el.style.left = x + 'px';
        el.style.top = y + 'px';
        el.style.background = colors[Math.floor(Math.random()*colors.length)];
        el.style.transform = `rotate(${Math.random()*360}deg)`;
        document.body.appendChild(el);

        const angle = (Math.random()*Math.PI*2);
        const distance = 80 + Math.random()*160;
        const dx = Math.cos(angle)*distance;
        const dy = Math.sin(angle)*distance - (50 * Math.random());
        const rot = (Math.random()*720 - 360);
        el.animate([
          { transform: `translate(0px,0px) rotate(0deg)`, opacity: 1 },
          { transform: `translate(${dx}px, ${dy}px) rotate(${rot}deg)`, opacity: 0.02 }
        ], { duration: 900 + Math.random()*700, easing: 'cubic-bezier(.2,.7,.2,1)' });
        setTimeout(()=> el.remove(), 1900);
      }
    }

    // envelope click handlers (animated + confetti + modal)
    document.querySelectorAll('.envelope-container').forEach(container => {
      container.addEventListener('click', (e) => {
        const type = container.dataset.type;
        const env = container.querySelector('.envelope');
        const rect = container.getBoundingClientRect();
        const cx = rect.left + rect.width/2;
        const cy = rect.top + rect.height/2;

        // add open class to animate flap & seal
        if (env) {
          env.classList.add('open');
          // small pop sound
          playPop();
        }

        // confetti burst
        burstConfetti(cx, cy, 20);

        // show modal after a tiny delay to let animation shine
        setTimeout(()=> openLetter(type), 260);

        // remove open class after some time so it can be opened again visually
        setTimeout(()=> { if (env) env.classList.remove('open'); }, 1300);
      });
    });

    function openLetter(type) {
      const modal = document.getElementById('owModal');
      const title = document.getElementById('owTitle');
      const content = document.getElementById('owContent');

      let titleText = "";
      if(type === 'sad') titleText = "Open When You're Sad";
      if(type === 'miss') titleText = "Open When You Miss Me";
      if(type === 'happy') titleText = "Open When You Need a Laugh";
      if(type === 'love') titleText = "Why I Love You";

      title.textContent = titleText;
      content.textContent = LETTER_CONTENT[type] || "";
      modal.setAttribute("aria-hidden", "false");
      playChime();
    }

    function closeLetter() {
      const modal = document.getElementById('owModal');
      modal.setAttribute("aria-hidden", "true");
      playPop();
    }

    /***** GAME: fixed close button / persistent opened state until refresh *****/
    const gameButton = document.getElementById('gameButton');
    const gameModal = document.getElementById('gameModal');
    const grid = document.getElementById('gameGrid');

    const tasks = [
      "Say 'I love you' in your cutest voice üíó",
      "Send me your cutest selfie üòò",
      "Tell me one memory of us you love the most ‚ù§Ô∏è",
      "Sing one line of any song you think of me üé§",
      "Send me a voice note saying you miss me ü•∫",
      "Tell me what you would name our future pet üòÜ",
      "Say 'Goodnight my love' in sleepy voice üí§",
      "Send me a picture of any pink thing üíñ",
      "Call me and say one sweet thing üíû",
      "Write 'I love you' 10 times and send me üíå"
    ];

    // keep opened indices
    const opened = new Set();

    function createGameGrid() {
      grid.innerHTML = '';
      tasks.forEach((task, index) => {
        const wrapper = document.createElement('div');
        wrapper.style.textAlign = 'center';

        const box = document.createElement('button');
        box.className = 'box';
        box.type = 'button';
        box.textContent = index + 1;
        box.setAttribute('aria-label', 'Box ' + (index+1));

        const taskBubble = document.createElement('div');
        taskBubble.className = 'task-bubble';
        taskBubble.style.display = 'none';
        taskBubble.textContent = task;

        // if previously opened, mark it
        if (opened.has(index)) {
          box.classList.add('opened');
          taskBubble.style.display = 'block';
        }

        box.addEventListener('click', () => {
          if (opened.has(index)) {
            // small nudge
            playTone(520, 0.08, 'sine', 0.04);
            box.animate([{ transform: 'translateY(0)' }, { transform: 'translateY(-6px)' }, { transform: 'translateY(0)' }], { duration: 300 });
            return;
          }
          opened.add(index);
          box.classList.add('opened');
          taskBubble.style.display = 'block';
          playChime();
          // ensure close button visible by scrolling modal to bottom a bit
          ensureCloseVisible();
        });

        wrapper.appendChild(box);
        wrapper.appendChild(taskBubble);
        grid.appendChild(wrapper);
      });
    }

    function openGame() {
      gameModal.setAttribute('aria-hidden', 'false');
      playPop();
      createGameGrid();
      // scroll modal content a bit to show top
      const box = gameModal.querySelector('.game-box');
      if (box) box.scrollTop = 0;
    }
    function closeGame() {
      gameModal.setAttribute('aria-hidden', 'true');
      playConfirm();
    }

    gameButton.addEventListener('click', openGame);

    // Show gameButton when page bottom reached
    function checkShowGameButton() {
      if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 220) {
        gameButton.classList.add("show");
      }
    }
    window.addEventListener("scroll", checkShowGameButton);
    window.addEventListener("resize", checkShowGameButton);
    setTimeout(checkShowGameButton, 600); // initial check

    // ensure close visible (scroll modal to bottom if all boxes opened)
    function ensureCloseVisible() {
      const modal = document.getElementById('gameModal');
      if (modal && modal.getAttribute('aria-hidden') === 'false') {
        const box = modal.querySelector('.game-box');
        if (box) {
          setTimeout(()=> { box.scrollTop = box.scrollHeight; }, 60);
        }
      }
    }

    // initially create grid so DOM focus works
    createGameGrid();

    /***** Accessibility: close modals on ESC *****/
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        const ow = document.getElementById('owModal');
        if (ow && ow.getAttribute('aria-hidden') === 'false') closeLetter();
        if (gameModal && gameModal.getAttribute('aria-hidden') === 'false') closeGame();
      }
    });

  </script>

</body>
</html>